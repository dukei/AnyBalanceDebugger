function api_onload(){function D(e){if("AnyBalanceApiError"==e.name)e={error:!0,message:e.message};else if("AnyBalanceApiUserError"==e.name)e.error=!0,e.name=J;else{var m;if("object"==typeof e){m="Unhandled exception in user script:"+("\nname: "+e.name+"\nmessage: "+e.message);for(var f in e)/^(name|message|stack)$/.test(f)||(m+="\n"+f+": "+e[f]);e.stack&&(m+="\nCall stack:\n"+e.stack)}else m=""+e;e={error:!0,message:m,investigate:!0,unhandled:!0}}return e}function E(){F||G||H({error:!0,message:"main() exited without calling setResult()"})}
var f=g_AnyBalanceApiParams,t=f.preferences,G=f.async,S,F,n,J,z=AnyBalance=function(){function e(a,b){b||(b=[]);var c=ma(f.signature+k({method:a,params:b}));if(c&&"string"==typeof c){if("{"==c.charAt(0))return c=u(c),c.result;throw new g(c);}throw new g("Api returned nothing!");}function m(){return d?d.getLastError():e("getLastError")}function z(a,b){return T&&U?U(a,b):d?d.trace(a,b):e("trace",[a,b])}function r(a){var b={},c=V,d;for(d in a)W(a[d])?b[c[d]||d]=r(a[d]):b[c[d]||d]=a[d];return b}function C(a){a=
r(a);return d?d.setOptions(k(a)):e("setOptions",[k(a)])}function E(a,b){return d?d.addEventListener(a,b):e("addEventListener",[a,b])}function g(a){return{name:"AnyBalanceApiError",message:a||M(m())}}function N(a,b,c){b=W(b)?b:{allow_retry:b||J,fatal:c||J};b.name="AnyBalanceApiUserError";b.message=a;return b}function M(a){return"object"==typeof a?""+a:a}function G(a){do{if(a){if(n.obj[a])break;n.arr.push(a);n.obj[a]=!0;if("-"!=a.substr(-1)){var b=K.test(a);a=a.replace(K,"");if(b)continue}}break}while(1)}
function X(){if(!n){n={arr:[],obj:{}};var a=t.ab$counters,b;if(a)for(b=0;b<a.length;++b)G(a[b]);else for(b=0;20>b;++b)G(t["counter"+b])}}function O(a){return"[object Array]"===Object.prototype.toString.call(a)}function W(a){return a&&"object"==typeof a&&!O(a)}function Y(a){X();for(var b=0;b<arguments.length;++b){var c=arguments[b];if(O(c)?Y.apply(this,c):na(c))return!0}return!1}function na(a){var b=n.obj,c;if(b["--auto--"]||0==n.arr.length)return!0;do{if(!c&&b[a]||b[a+"+"])return!0;if(b[a+"-"])return!1;
c=K.test(a);a=a.replace(K,"")}while(c);return b["+"]?!0:!1}function P(){var a;a=d?d.getCookies():e("getCookies");if(v&&!a)throw new g;return a?u(a):null}function Z(a,b,c,h){if(h){if("object"!=typeof h)throw new g("setCookie: params can be null, undefined, empty string or an object only!");h=k(h)}else h="";"undefined"==typeof c&&(c=null);a=d?d.setCookie(a,b,c,h):e("setCookie",[a,b,c,h]);return l(a)}function aa(){var a;a=d?d.getLastResponseParameters():e("getLastResponseParameters");if(v&&!a)throw new g;
return a?u(a):null}function ba(){if(null===p){var a;a=d?d.loadData():e("loadData");p=(a=A(a))?u(a):{}}}function ca(a,b){ba();return"undefined"==typeof p[a]?b:p[a]}function da(a,b){ba();p[a]!=b&&(B=!0,p[a]=b)}function L(){!1===w&&((w=aa())||(ea=m()));if(!w&&v)throw new N(ea);return w}function fa(){var a=L();return a?a.headers:[]}function l(a){if(v&&!0!==a)throw new g;return a}function A(a){if(v&&null==a)throw new g;return M(a)}function ga(a,b){var c=[];if(x[a])c=x[a];else{x[a]=c;var d=E(a,!0);l(d)}c.push(b);
return!0}function ha(a,b){if(!x[a])return!1;var c=x[a],d=b?c.indexOf(b):0;~d&&c.splice(d,1);c.length||(c=E(a,!1),l(c),delete x[a]);return 0<=d}function ia(a,b){try{for(var c=x[a],d=0;c&&d<c.length;++d)c[d](b)}catch(e){H(D(e))}}function ja(a){if(a&&(a=r(a),a.callback)){var b="#"+ ++oa;ga(b,a.callback);a.callback=b}return a}function y(a,b,c){c=c?k(c):"";a=a||"";b=d?d.callPreferenceMethod(a,b,c):e("callPreferenceMethod",[a,b,c]);(b=A(b))&&(b=u(b));return b&&b.value}function ka(a){a=y(a,"getSubPreferences");
for(var b=[],c=0;c<a&&a.length;++c)b.push(new I(a[c]));return b}function Q(a,b,c){/^(parent|preference)$/.test(c)&&(a[b]=new I(a[b]))}function I(a){function b(a,b){do{if(0<=R[a].properties.indexOf(b))return!0;a=R[a].parent}while(a);throw new g("Preference "+a+" does not have property "+b);}function c(a,c){if(!R[a])throw new g("Wrong preference type: "+a);var d=!1;if("string"==typeof c)return b(a,c);if(O(c))for(var e=0;e<c.length;++e)d=b(a,c[e].name)||d;else{for(e in c)d=b(a,e)||d;return d}}var h=
a.split("#"),f=h[0],q=h[1];c(f);if(null===q)throw new g("No key in preference typekey: "+a);this.set=function(a,b){c(f,a);var h;"string"==typeof a?h=k({value:b}):(h="",a=k(a));var g;g=a;g=d?d.setPreferenceProperty(q,g,h):e("setPreferenceProperty",[q,g,h]);return l(g)};this.get=function(a){c(f,a);var b;b=d?d.getPreferenceProperty(q,a):e("getPreferenceProperty",[q,a]);if(b=A(b)){b=u(b);if("string"!=typeof a){for(var h in b)Q(b,h,h);return b}Q(b,"value",a);return b.value}return null};this.add=function(a){(a=
y(q,"addPreference",a))&&(a=new I(a));return a};this.remove=function(){return y(q,"removePreference",void 0)};this.getSubPreferences=function(){return ka(q)};this.getType=function(){return f};this.getKey=function(){return q}}var v=!0,d=f.api,k=JSON.stringify,u=JSON.parse,T=f.debugmode,ma=f.prompt_placeholder||this.prompt,U=f.trace_placeholder,la=f.setResult_placeholder,K=/\.[^.]*$/,p=null,B,w=!1,ea,x={},oa=0,R={Preference:{properties:"key title summary summaryPlain enabled dependency order defaultValue visible parent preference".split(" ")},
DialogPreference:{properties:["dialogTitle","dialogMessage","positiveButtonText","negativeButtonText"],parent:"Preference"},EditTextPreference:{properties:["inputType","text"],parent:"DialogPreference"},ListPreference:{properties:["entries","value"],parent:"DialogPreference"},CheckBoxPreference:{properties:["summaryOff","summaryOn","disableDependentsState","checked"],parent:"Preference"},PreferenceGroup:{properties:["preferences"],parent:"Preference"},PreferenceCategory:{properties:[],parent:"PreferenceGroup"},
PreferenceScreen:{properties:[],parent:"PreferenceGroup"}},V={DEFAULT_CHARSET:"defaultCharset",FORCE_CHARSET:"forceCharset",REQUEST_CHARSET:"requestCharset",SSL_ENABLED_PROTOCOLS:"sslEnabledProtocols",SSL_ENABLED_PROTOCOLS_ADD:"sslEnabledProtocolsAdd",SSL_ENABLED_PROTOCOLS_REMOVE:"sslEnabledProtocolsRemove",SSL_ENABLED_CIPHER_SUITES:"sslEnabledCipherSuites",SSL_ENABLED_CIPHER_SUITES_ADD:"sslEnabledCipherSuitesAdd",SSL_ENABLED_CIPHER_SUITES_REMOVE:"sslEnabledCipherSuitesRemove",PER_DOMAIN:"perDomain",
HTTP_METHOD:"httpMethod"};return{getLevel:function(){return d?d.getLevel():e("getLevel")},getLastError:function(){return M(m())},trace:function(a,b){z(""+a,b||"trace")},setExceptions:function(a){v=a},requestGet:function(a,b,c){b=b?k(b):"";c=(c=ja(c))?k(c):"";w=!1;a=d?d.requestGet(a,b,c):e("requestGet",[a,b,c]);return A(a)},requestPost:function(a,b,c,h){var f=b&&"object"===typeof b;f&&(b=k(b));c=c?k(c):"";h=(h=ja(h))?k(h):"";w=!1;b=b||"";f=!!f;a=d?d.requestPost(a,b,f,c,h):e("requestPost",[a,b,f,c,
h]);return A(a)},setAuthentication:function(a,b,c){if(c){if("object"!=typeof c)throw new g("setAuthentication: authscope can be null, undefined, empty string or an object only!");c=k(c)}else c="";a=d?d.setAuthentication(a,b,c):e("setAuthentication",[a,b,c]);return l(a)},setCookie:Z,getCookies:P,getLastResponseParameters:aa,getLastUrl:function(){var a=L();return a?a.url:""},getLastStatusString:function(){var a=L();return a?a.status:""},getLastStatusCode:function(){var a=L();return a?(a=a.status.match(/\S+\s+(\d+)/))?
parseInt(a[1]):0:0},getLastResponseHeaders:fa,getLastResponseHeader:function(a){var b=fa();a=a.toLowerCase();for(var c=0;c<b.length;++c){var d=b[c];if(d[0].toLowerCase()==a)return d[1]}return!1},getCookie:function(a,b){if(b&&"object"!=typeof b)throw new N("getCookie: params argument should be null or object!");for(var c=b&&b.path,d=b&&b.domain,e=b&&b.allcookies||P(),f=0;f<e.length;++f){var g=e[f];if(g.name==a&&(!d||g.domain&&0==d.toLowerCase().indexOf(g.domain))&&(!c||g.path&&0==c.indexOf(g.path)))return g.value}return null},
retrieveCode:function(a,b,c){c=c?k(c):"";b=b||"";a=d?d.retrieveCode(a,b,c):e("retrieveCode",[a,b,c]);return A(a)},clearAuthentication:function(){var a;a=d?d.clearAuthentication():e("clearAuthentication");return l(a)},onInitialLoad:function(){var a;a=f.nAccountID;a=d?d.onInitialLoad(a):e("onInitialLoad",[a]);return l(a)},isSetResultCalled:function(){return F},setResult:function(a){B&&z("WARNING: setResult is called without saving data!","setResult");if(F)return!0;F=!0;if("function"==typeof converter_main)try{a=
converter_main(a)}catch(c){a=D(c)}var b;b=f.nAccountID;a=k(a);b=T&&la?la(b,a):d?d.setResult(b,a):e("setResult",[b,a]);l(b);return b},OPTIONS:V,setOptions:function(a){a=C(a);return l(a)},sleep:function(a){if("number"!=typeof a)throw new g("AnyBalance.sleep() accepts only integer argument in milliseconds!");a=d?d.sleep(a):e("sleep",[a]);return l(a)},Error:N,getAvailableCounters:function(){X();return n.arr},isAvailable:Y,getPreferences:function(){return t?t:y("","getPreferences")},setDefaultCharset:function(a){a=
C({DEFAULT_CHARSET:a});return l(a)},getTopPreferences:function(){return ka("")},getPreference:function(a){return(a=y(a,"getPreference"))?new I(a):null},setPreferenceProperties:function(a){return y(null,"setPreferenceProperties",a)},getPreferenceProperties:function(a){a=y(null,"getPreferenceProperties",a);for(var b in a){var c=a[b],d=void 0;for(d in c)Q(c,d,d)}return a},addCallback:ga,removeCallback:ha,fireCallback:ia,fireRequestCallback:function(a,b){try{w=!1,d?d.restoreRequestParams(a):e("restoreRequestParams",
[a]),ia(a,b)}catch(c){H(D(c))}finally{ha(a)}},Preference:I,getData:ca,setData:da,clearData:function(){p={};B=!0},saveData:function(a){p&&(B||a)&&(a=k(p),a=d?d.saveData(a):e("saveData",[a]),l(a));B=!1},saveCookies:function(){B=!0;da("!@#AB_COOKIES",P())},restoreCookies:function(){for(var a=ca("!@#AB_COOKIES",[]),b=0;b<a.length;++b){var c=a[b];Z(c.domain,c.name,c.value,c)}},getCapabilities:function(){var a;a=d?d.getCapabilities():e("getCapabilities");if(v&&!a)throw new g;if(a=a?u(a):null)a.caseInsensitiveHeaders=
!0;return a},setLoginSuccessful:function(){S=!0}}}(),H=z.setResult,C;try{if(z.onInitialLoad())if("function"==typeof converter_init&&converter_init(),(C=t.ab$countersSet)&&!G)for(var r=0;r<C.length;++r){t.ab$countersSetIndex=r;t.ab$counters=C[r];n=F=J;try{main()}catch(e){H(D(e));if(e.fatal){z.trace("Caught fatal error, breaking iterations");break}if(!S){z.trace("Login was not successful, breaking iterations");break}}E()}else main()}catch(e){H(D(e))}finally{E()}};